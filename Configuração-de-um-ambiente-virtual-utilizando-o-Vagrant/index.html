<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Automação de Ambiente com Vagrant - MDS-EPS</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">MDS-EPS</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li >
                        <a href="../Projetos----Temas/">Projetos- Temas</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Disciplinas <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../Métodos-de-Desenvolvimento-de-Software/">Métodos de Desenvolvimento de Software</a>
</li>
                            
<li >
    <a href="../Gestão-de-Portfólios-e-Projetos-de-Software/">Gestão de Portfólio e Projetos de Software</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Fases Rup e PMBOK <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../RUP-(Rational-Unified-Process)/">RUP (Rational Unified Process.md</a>
</li>
                            
<li >
    <a href="../01---Fase-Iniciação/">Fase Iniciação</a>
</li>
                            
<li >
    <a href="../02---Fase-Elaboração-(RUP)-Planejamento-(PMBok)/">Fase Elaboração (RUP.md Planejamento(PMBOK)</a>
</li>
                            
<li >
    <a href="../03---Fase-de-Construção-(RUP),-Monitoramente-e-Controle-(PMBok)/">Fase de Construção (RUP), Execução/Monitoramente e Controle (PMBOK)</a>
</li>
                            
<li >
    <a href="../04---Fase-Transição-(RUP),-Finalização-(PMBok)/">Fase Transição (RUP), Finalização (PMBOK)</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Métodos Ágeis <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../Scrum/">Scrum</a>
</li>
                            
<li >
    <a href="../Programação-Extrema-(XP)/">Programação Extrema (XP)</a>
</li>
                            
<li >
    <a href="../Indicadores-Ágeis/">Indicadores Ágeis</a>
</li>
                            
<li >
    <a href="../Como-pontuar-o-backlog/">Como pontuar o backlog</a>
</li>
                            
<li >
    <a href="../Como-melhorar-a-comunicação-da-equipe/">Como melhorar a comunicação</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Programação Extrema (XP) <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../Pair-Programming/">Pair Programming</a>
</li>
                            
<li >
    <a href="../Test-Driven-Development/">Test Driven Development</a>
</li>
                            
<li >
    <a href="../Acceptance-Test-Driven-Development-(ATDD)/">Acceptance Test Driven Development (ATDD)</a>
</li>
                            
<li >
    <a href="../Refactoring/">Refactoring</a>
</li>
                            
<li >
    <a href="../Integração-Contínua/">Integração continua</a>
</li>
                            
<li >
    <a href="../Integração-Contínua---Deploy-Contínuo/">Integração Contínua Deploy Contínuo</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DevOps <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../Automações/">Automações</a>
</li>
                            
<li >
    <a href="../Configuracao-de-ambiente-virtual-utilizando-docker/">Automação de Ambiente com Docker</a>
</li>
                            
<li >
    <a href="../Docker-Compose/">Orquestração de Containers com Docker Compose</a>
</li>
                            
<li class="active">
    <a href="./">Automação de Ambiente com Vagrant</a>
</li>
                            
<li >
    <a href="../Deploy-Contínuo/">Deploy Contínuo na Plataforma Heroku</a>
</li>
                            
<li >
    <a href="../Integração-Contínua-Travis-CI/">Integração Contínua com Travis CI</a>
</li>
                            
<li >
    <a href="../Colocando-a-aplicação-em-produção-com-NGINX/">Disponibilizando a Aplicação com o Proxy Reverso Nginx</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutoriais <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../Git/">Tutorial Git</a>
</li>
                            
<li >
    <a href="../Configuração-de-Ambiente/">Tutorial de Instalação do Ionic</a>
</li>
                            
<li >
    <a href="../Android---Circle-Continuous-Integration-(Unit-Tests,-UI-Tests,-Coverage-build-pass-rule,-beta-deploy-and-production-deploy-automated)/">Android Integração contínua com Circle CI</a>
</li>
                            
<li >
    <a href="../Configuração-de-Ambiente-para-React-Native/">Configuração de Ambiente para React Native</a>
</li>
                            
<li >
    <a href="../Rails/">Tutorial Instalação Ruby on Rails</a>
</li>
                            
<li >
    <a href="../REST-API-em-Node.js-e-RethinkDB/">Tutorial REST API em Node.js</a>
</li>
                            
<li >
    <a href="../Teste-Automatizado-Cucumber-JS/">Teste Automatizado Cucumber JS</a>
</li>
                            
<li >
    <a href="../Teste-Automatizado-Cucumber-Rails/">Teste Automatizado Cucumber Rails</a>
</li>
                            
<li >
    <a href="../Teste-Automatizado-com-Selenium-IDE/">Teste Automatizado com Selenium IDE</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../Docker-Compose/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../Deploy-Contínuo/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#automatizando-o-ambiente-com-vagrant">Automatizando o ambiente com Vagrant</a></li>
            <li><a href="#criacao-do-ambiente">Criação do ambiente</a></li>
            <li><a href="#configuracao-da-vagrant">Configuração da Vagrant</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="automatizando-o-ambiente-com-vagrant">Automatizando o ambiente com Vagrant</h1>
<p>o <em>Vagrant</em> é uma ferramenta para automatizar a criação, configuração e principalmente gerenciamento de ambientes de desenvolvimento através de máquinas virtuais (VM) via softwares de virtualização como VirtualBox, VMWare, Parallels, entre outros. A ideia principal é você poder montar e configurar uma máquina virtual de maneira totalmente automatizada através de um conjunto de instruções escritas usando a <strong>DSL</strong> (<em>Domain-Specific Language</em>) da própria ferramenta. Sempre que você rodar essas instruções o resultado deverá ser o mesmo.</p>
<p>O <em>Vagrant</em> irá isolar dependências e configurações em um único ambiente virtual, consistente e descartável, sem precisar sacrificar nenhuma das ferramentas que estamos acostumados a trabalhar. Para isso, só precisamos criar um único arquivo dentro do projeto, o <em>Vagrantfile</em>, e logo em seguida dar um simples comando para que todo o ambiente seja montado, instalado e configurado.</p>
<p>Outra grande vantagem é a possibilidade de replicar o mesmo ambiente de maneira fácil e rápida em diferentes máquinas. Por as configurações do <em>Vagrant</em> serem apenas arquivos texto, elas podem estar embutidas dentro do seu projeto e controle de versão, como no caso o <em>git</em>, onde qualquer membro da equipe poderá baixar e criar o próprio ambiente de desenvolvimento a partir do <em>Vagrantfile</em> criado dentro do seu repositório.</p>
<h2 id="criacao-do-ambiente">Criação do ambiente</h2>
<p>Considerando que o seu sistema operacional é um Linux Ubuntu, o primeiro passo, é instalar o programa <em>VirtualBox</em>, que é um software de virtualização, utilizando-o para criar dinamicamente máquinas virtuais configuráveis, leves e portáteis. Para isso, execute o seguinte comando no terminal:</p>
<p><code>sudo apt-get install virtualbox</code></p>
<p>Após o VirtualBox ter sido instalado corretamente, falta instalar o <em>Vagrant</em>. No terminal, execute:</p>
<p><code>sudo apt-get install vagrant</code></p>
<p>E pronto, agora temos a vagrant instalada com sucesso, próximo passo é a configuração do ambiente.</p>
<h2 id="configuracao-da-vagrant">Configuração da Vagrant</h2>
<p>Primeiramente escolha e acesse, via terminal, um diretório ou projeto qualquer existente da sua máquina.</p>
<p>Agora, iremos criar o arquivo que conterá toda a configuração inicial do nosso ambiente virtual. Esse arquivo é o <em>Vagrantfile</em>, mencionado anteriormente. Ele será criado automaticamente quando executarmos o seguinte comando:</p>
<p><em>vagrant init ubuntu/trusty64</em></p>
<p>Note que este comando cria uma máquina virtual com um sistema operacional Ubuntu server 14.04 LTS, no qual é considerado o suficiente para este tutorial. </p>
<p>Para rodar esta <em>VM</em> basta executar o comando abaixo:</p>
<p><code>vagrant up</code></p>
<p>É importante ter paciência ao rodar este comando pela primeira vez, pois o <em>Vagrant</em> terá que baixar a <em>VM</em> da internet de um repositório global com <em>VMs</em> pré-configuradas.</p>
<p>Se o comando foi executado com sucesso, já podemos utilizar nossa máquina virtual. Para isso, podemos conectar na VM via SSH através do comando a seguir:</p>
<p><code>vagrant ssh</code></p>
<h3 id="provisionamento">Provisionamento</h3>
<p>Está é uma etapa importante para inicializar o <em>Vagrant</em> com todas as dependências necessárias para trabalhar no projeto, sendo que a <em>Vagrant</em> recém criada é um vem enxuta e normalmente não satisfaz os requisitos do nosso ambiente de desenvolvimento.</p>
<p>O ideal é que o <em>Vagrant</em> fizesse isso automaticamente sempre criássemos a VM no primeiro comando <code>vagrant up</code>. Para isso, eu teria que de alguma forma indicar ao <em>Vagrant</em> para executar alguns comandos dentro da VM assim que ela fosse inicializada. Esses comandos poderiam estar em um <em>script shell</em>.</p>
<p>Para isso é necessário criar um arquivo, como por exemplo <code>init.sh</code>, contendo as instruções de instalação das dependências para o ambiente de desenvolvimento.</p>
<p>Neste arquivo devem conter instruções do tipo:</p>
<pre><code>sudo apt-get -y update
sudo apt-get -y install openjdk-7-jdk
sudo apt-get -y install tomcat7
sudo service tomcat7 start
</code></pre>

<p>Pronto! Agora só resta indicar ao <code>Vagrant</code> para rodar o script <code>init.sh</code> acima que fica localizado na raiz do nosso projeto. Para isso, precisamos configurar o arquivo <code>Vagrantfile</code> como a seguir:</p>
<pre><code class="ruby">Vagrant.configure(&quot;2&quot;) do |config|
    config.vm.box = &quot;ubuntu/trusty64&quot;
    config.vm.provision :shell, path: &quot;init.sh&quot;
end
</code></pre>

<p>Basicamente adicionamos a linha <code>config.vm.provision</code> informando o tipo do arquivo a ser provisionado :<em>shell</em> e sua localização relativa dentro do projeto. Para finalizar, só precisamos executar o comando <code>vagrant up</code> e nossa VM será criada e configurada a partir do nosso <em>script shell</em>.</p>
<p>A principal vantagem de usar o provisionamento do <em>Vagrant</em> é que podemos automatizar todo o processo de configuração da <em>VM</em> o que nos permite ter ambientes replicáveis. </p>
<p>Agora está finalizada a instalação e configuração do ambiente virtual utilizando a <code>Vagrant</code>.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
